{"ast":null,"code":"import _toConsumableArray from \"C:/React/pokedex-apii/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"C:/React/pokedex-apii/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/React/pokedex-apii/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/React/pokedex-apii/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\React\\\\pokedex-apii\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./styles.css\";\nimport Navbar from \"./components/Navbar\";\nimport Searchbar from \"./components/Searchbar\";\nimport Pokedex from \"./components/Pokedex\";\nimport { getPokemonData, getPokemons, searchPokemon } from \"../api\";\nimport { FavoriteProvider } from \"../contexts/favoritesContext\";\nimport Footer from \"./components/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar useState = React.useState,\n    useEffect = React.useEffect;\nvar localStorageKey = \"favorite_pokemon\";\nexport default function App() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      pokemons = _useState2[0],\n      setPokemons = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      total = _useState6[0],\n      setTotal = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      favorites = _useState10[0],\n      setFavorites = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      notFound = _useState12[0],\n      setNotFound = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      searching = _useState14[0],\n      setSearching = _useState14[1];\n\n  var fetchPokemons = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var data, promises, results;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setLoading(true);\n              _context2.next = 4;\n              return getPokemons(25, 25 * page);\n\n            case 4:\n              data = _context2.sent;\n              promises = data.results.map( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pokemon) {\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return getPokemonData(pokemon.url);\n\n                        case 2:\n                          return _context.abrupt(\"return\", _context.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n              _context2.next = 8;\n              return Promise.all(promises);\n\n            case 8:\n              results = _context2.sent;\n              setPokemons(results);\n              setLoading(false);\n              setTotal(Math.ceil(data.count / 25));\n              setNotFound(false);\n              _context2.next = 17;\n              break;\n\n            case 15:\n              _context2.prev = 15;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 15]]);\n    }));\n\n    return function fetchPokemons() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadFavoritePokemons = function loadFavoritePokemons() {\n    var pokemons = JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(function () {\n    loadFavoritePokemons();\n  }, []);\n  useEffect(function () {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  var updateFavoritePokemons = function updateFavoritePokemons(name) {\n    var updated = _toConsumableArray(favorites);\n\n    var isFavorite = updated.indexOf(name);\n\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(pokemon) {\n      var result;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (pokemon) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", fetchPokemons());\n\n            case 2:\n              setLoading(true);\n              setNotFound(false);\n              setSearching(true);\n              _context3.next = 7;\n              return searchPokemon(pokemon);\n\n            case 7:\n              result = _context3.sent;\n\n              if (result) {\n                _context3.next = 14;\n                break;\n              }\n\n              setNotFound(true);\n              setLoading(false);\n              return _context3.abrupt(\"return\");\n\n            case 14:\n              setPokemons([result]);\n              setPage(0);\n              setTotal(1);\n\n            case 17:\n              setLoading(false);\n              setSearching(false);\n\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSearch(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(FavoriteProvider, {\n    value: {\n      favoritePokemons: favorites,\n      updateFavoritePokemons: updateFavoritePokemons\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n          onSearch: onSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), notFound ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"not-found-text\",\n          children: \"No se encontro el Pokemon que buscabas \\uD83D\\uDE2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Pokedex, {\n          loading: loading,\n          pokemons: pokemons,\n          page: page,\n          setPage: setPage,\n          total: total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"0OzLZfUS7rGmADdk2glByDdz0F4=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Navbar","Searchbar","Pokedex","getPokemonData","getPokemons","searchPokemon","FavoriteProvider","Footer","useState","useEffect","localStorageKey","App","pokemons","setPokemons","page","setPage","total","setTotal","loading","setLoading","favorites","setFavorites","notFound","setNotFound","searching","setSearching","fetchPokemons","data","promises","results","map","pokemon","url","Promise","all","Math","ceil","count","loadFavoritePokemons","JSON","parse","window","localStorage","getItem","updateFavoritePokemons","name","updated","isFavorite","indexOf","splice","push","setItem","stringify","onSearch","result","favoritePokemons"],"sources":["C:/React/pokedex-apii/src/App.js"],"sourcesContent":["import React from \"react\";\nimport \"./styles.css\";\nimport Navbar from \"./components/Navbar\";\nimport Searchbar from \"./components/Searchbar\";\nimport Pokedex from \"./components/Pokedex\";\nimport { getPokemonData, getPokemons, searchPokemon } from \"../api\";\nimport { FavoriteProvider } from \"../contexts/favoritesContext\";\nimport Footer from \"./components/Footer\";\n\nconst { useState, useEffect } = React;\n\nconst localStorageKey = \"favorite_pokemon\";\n\nexport default function App() {\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(25, 25 * page);\n      const promises = data.results.map(async (pokemon) => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n      setNotFound(false);\n    } catch (err) {}\n  };\n\n  const loadFavoritePokemons = () => {\n    const pokemons =\n      JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  const updateFavoritePokemons = (name) => {\n    const updated = [...favorites];\n    const isFavorite = updated.indexOf(name);\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  const onSearch = async (pokemon) => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n    setLoading(false);\n    setSearching(false);\n  };\n\n  return (\n    <FavoriteProvider\n      value={{\n        favoritePokemons: favorites,\n        updateFavoritePokemons: updateFavoritePokemons\n      }}\n    >\n      <div>\n        <Navbar />\n        <div className=\"App\">\n          <Searchbar onSearch={onSearch} />\n          {notFound ? (\n            <div className=\"not-found-text\">\n              No se encontro el Pokemon que buscabas 😭\n            </div>\n          ) : (\n            <Pokedex\n              loading={loading}\n              pokemons={pokemons}\n              page={page}\n              setPage={setPage}\n              total={total}\n            />\n          )}\n        </div>\n        <Footer />\n      </div>\n    </FavoriteProvider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}